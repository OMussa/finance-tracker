<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Finance Tracker{% endblock %}</title>

    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-100 min-h-screen">

    <!-- Top Navbar -->
    <nav class="bg-slate-900 text-white">
        <div class="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between">
            <a href="{{ url_for('main_bp.dashboard') }}" class="font-semibold text-lg">
                Finance Tracker
            </a>
            <div class="flex gap-4 text-sm">
                {% if g.user %}
                {#     <!-- Links for logged-in users --> #}
                <span>Logged in as: {{ g.user.email }}</span>
                <a href="{{ url_for('main_bp.dashboard') }}" class="hover:text-sky-300">Dashboard</a>
                <a href="{{ url_for('main_bp.history') }}" class="hover:text-sky-300">History</a>
                <a href="{{ url_for('transaction.expense') }}" class="hover:text-sky-300">New Expense</a>
                <a href="{{ url_for('transaction.income') }}" class="hover:text-sky-300">New Income</a>
                <a href="{{ url_for('auth.logout') }}" class="hover:text-sky-300">Logout</a>
                {% else %} 
                {#     <!-- Links for users not logged in --> #}
                <a href="{{ url_for('auth.login') }}" class="hover:text-sky-300">Login</a>
                <a href="{{ url_for('auth.signup') }}" class="hover:text-sky-300">Sign Up</a>
                {% endif %} 
            </div>
        </div>
    </nav>
  {% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="max-w-3xl mx-auto mt-4 px-4 space-y-3">
      {% for category, message in messages %}
        {% set box_class =
          "border rounded-lg p-3 " ~
          ("bg-green-50 border-green-300 text-green-800" if category == "success"
           else "bg-red-50 border-red-300 text-red-800" if category == "error"
           else "bg-slate-50 border-slate-300 text-slate-800")
        %}
        <div class="{{ box_class }}">
          <strong class="capitalize">{{ category }}:</strong> {{ message }}
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}
    <!-- Page Content -->
    <main class="max-w-5xl mx-auto px-4 py-8">
        {% block content %}
        {% endblock %}
    </main>

    <!-- Optional footer -->
    <footer class="text-center text-xs text-slate-500 py-4">
        Finance Tracker &copy; {{ 2025 }}
    </footer>

</body>
</html>
